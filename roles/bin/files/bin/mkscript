#!/bin/sh

# mkscript --- A script that generates the skeleton of another (new) script.

# Commentary:

# Creates an executable file if it does not already exist (current dir).
# Defaults to POSIX shell script if ${2} is nil.

# checks
test -z "${1}" && printf 'You did not provide a name for the script.\n' >&2 \
    && exit 1
test -e "${1}" && printf 'The file already exists.\n' >&2 && exit 1

# shebang chooser
case ${2} in
bash) shebang='/usr/bin/env bash' ;;
perl) shebang='/usr/bin/env perl' ;;

# Default: POSIX shell script
*) shebang='/bin/sh'
esac

# create the script and its skeleton
touch "${1}" && chmod 0755 "${1}"
tee "${1}" <<EOF >/dev/null
#!${shebang}

# ${1} --- TODO: desc

# Commentary:

# TODO: desc

# Code:

#exit 0
EOF

printf 'Script created:\n' && file "${1}"

exit 0
