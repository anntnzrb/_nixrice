#!/bin/sh

#                               ██          ██
#                              ░██         ░██
#  ██████████   ██████   ██████░██  ██     ░██  ██████  ███     ██ ███████
# ░░██░░██░░██ ░░░░░░██ ░░██░░█░██ ██   ██████ ██░░░░██░░██  █ ░██░░██░░░██
#  ░██ ░██ ░██  ███████  ░██ ░ ░████   ██░░░██░██   ░██ ░██ ███░██ ░██  ░██
#  ░██ ░██ ░██ ██░░░░██  ░██   ░██░██ ░██  ░██░██   ░██ ░████░████ ░██  ░██
#  ███ ░██ ░██░░████████░███   ░██░░██░░██████░░██████  ███░ ░░░██ ███  ░██
# ░░░  ░░  ░░  ░░░░░░░░ ░░░    ░░  ░░  ░░░░░░  ░░░░░░  ░░░    ░░░ ░░░   ░░

# run with elevated privileges if not already
elevate_perms() { [ "$(id -u)" -ne 0 ] && exec sudo "$0" "$@"; }

# arch-based
[ -x "$(command -v "yay")" ] && {
    PKG_INSTALL="yay --needed --noconfirm -Syy"

    # dependencies
    $PKG_INSTALL \
        nodejs \
        yarn

    # [vim::ALE] (formatter)
    $PKG_INSTALL prettier
}

# void
[ -x "$(command -v "xbps-install")" ] && {
    elevate_perms

    # dependencies
    xbps-install -Sy \
        nodejs \
        yarn

    # [vim::ALE] (formatter)
    echo 'installing via npm...'
    sudo npm install --global prettier
}
