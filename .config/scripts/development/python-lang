#!/bin/sh

#                     ██   ██
#  ██████   ██   ██  ░██  ░██
# ░██░░░██ ░░██ ██  ██████░██       ██████  ███████
# ░██  ░██  ░░███  ░░░██░ ░██████  ██░░░░██░░██░░░██
# ░██████    ░██     ░██  ░██░░░██░██   ░██ ░██  ░██
# ░██░░░     ██      ░██  ░██  ░██░██   ░██ ░██  ░██
# ░██       ██       ░░██ ░██  ░██░░██████  ███  ░██
# ░░       ░░         ░░  ░░   ░░  ░░░░░░  ░░░   ░░

# run with elevated privileges if not already
elevate_perms() { [ "$(id -u)" -ne 0 ] && exec sudo "$0" "$@"; }

# arch-based
[ -x "$(command -v "yay")" ] && {
    PKG_INSTALL="yay --needed --noconfirm -Syy"

    # dependencies
    $PKG_INSTALL \
        python3 \
        python-pip
}

# void
[ -x "$(command -v "xbps-install")" ] && {
    elevate_perms

    # dependencies
    xbps-install -Sy \
        python3 \
        python3-pip
}

# debian-based
[ -x "$(command -v "apt")" ] && {
    elevate_perms

    # dependencies
    apt-get install -y \
        python3 \
        python3-pip
}

# language server
python3 -m pip install -U setuptools python-language-server

# [vim::ALE] (fixer)
python3 -m pip install -U black

# libs
python3 -m pip install -U \
    pylint \
    pynvim \
    rope \
    numpy \
    matplotlib \
    --user
