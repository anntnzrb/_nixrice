#!/bin/sh

# dddev --- Flash an image file using `dd`

# Commentary:

# This is just a wrapper around `dd` with a few extra options frequently used.

# NOTE: This script may also be used for purposes other than flashing an
# iso specifically.

# References:
# - https://unix.stackexchange.com/a/183920

# check
test `id -u` -ne 0 \
    && printf 'You need root priviledges to run this.\n' >&2 && exit 1
test ${#} -ne 2 && printf 'Usage: dddev <foo>.iso /dev/<bar>\n' >&2 && exit 1

# flash the iso
dd bs=128k status=progress if="${1}" of="${2}"        \
    || printf 'There was an error while coping\n' >&2 \
    && exit 1
sync # flush file system buffers

printf "dd finished copying '%s'\n" "${2}"

exit 0
