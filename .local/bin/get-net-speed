#!/bin/sh

# **
# gets the internet connection speed
#
# this script is slow to run;
# dependencies :: speedtest-cli
# *

# -----------------------------------------------------------------------------
# preamble
# -----------------------------------------------------------------------------

# load utilities
# shellcheck disable=1090
. "$LIBSHUTILS"

# -----------------------------------------------------------------------------
# functions
# -----------------------------------------------------------------------------

get_net_speed() {
    { is_net && is_installed speedtest-cli &&
        speedtest-cli | awk '/load:/ {print $2$3}' | xargs |
        awk '{print "⬇ "$1" ↔  ""⬆ "$2}'; } || echo 'N/A'
}

# -----------------------------------------------------------------------------
# main
# -----------------------------------------------------------------------------

get_net_speed
