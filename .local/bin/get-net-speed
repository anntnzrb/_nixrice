#!/bin/sh

# gets the internet connection speed
#
# this script is slow to run;
# requires having `speedtest-cli` installed

# checks if there's internet connection
fnIs_Net() {
    ping -q -c 1 1.1.1.1 >/dev/null 2>&1
}

# checks if program is installed
fnIs_Installed() {
    [ -x "$(command -v "$1")" ]
}

if fnIs_Net && fnIs_Installed speedtest-cli; then
    speedtest-cli | awk '/load:/ {print $2$3}' | xargs |
        awk '{print "⬇ "$1" ↔  ""⬆ "$2}'
else
    echo 'N/A'
fi
