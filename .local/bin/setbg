#!/bin/sh

# this script does the following:
#   run at Xorg launch (via .xprofile)
#   if file is passed as argument, set it as wallpaper
#   if directory is passed as argument, choose random image and
#   set it as wallpaper
#
# the wallpaper set is a symlink located @ ~

# wallpaper location
WP_LOCATION="$HOME/wallpaper.png"

[ -f "$1" ] && ln -fs "$(readlink -f "$1")" "$WP_LOCATION" &&
    notify-send -i "$WP_LOCATION" "wallpaper changed..."

[ -d "$1" ] &&
    ln -fs "$(find "$(readlink -f "$1")" -iregex '.*.\(jpg\|jpeg\|png\|gif\)' -type f | shuf -n 1)" "$WP_LOCATION" &&
    notify-send -i "$WP_LOCATION" "random wallpaper chosen"

xwallpaper --zoom "$WP_LOCATION"
