#!/bin/sh

# **
# gets the current battery capacity
# only tested with one battery attached
# *

# loop through all batteries
for battery in /sys/class/power_supply/BAT?; do
    CAPACITY=$(cat "$battery"/capacity)
    STATUS=$(cat "$battery"/status)

    if [ "$STATUS" = "Discharging" ] || [ "$STATUS" = "Charging" ] ||
        [ "$STATUS" = "Unknown" ]; then
        # pick icon depending on the amount of battery
        if [ "$CAPACITY" -ge 80 ]; then
            icon="ï‰€"
        elif [ "$CAPACITY" -ge 60 ]; then
            icon="ï‰"
        elif [ "$CAPACITY" -ge 30 ]; then
            icon="ï‰‚"
        elif [ "$CAPACITY" -ge 15 ]; then
            icon="ï‰ƒ"
        elif [ "$CAPACITY" -lt 15 ]; then
            icon="ï‰„"
        fi
        # if charging, plug icon + %
        [ "$STATUS" = "Charging" ] && icon="ğŸ”Œ"

        printf '%s%%' "$icon $CAPACITY"
    else
        icon="ğŸ”Œ"
        printf '%s' "ğŸŸ¢$icon"
    fi
done
