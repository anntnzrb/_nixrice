#!/bin/sh

# **
# toggle a program if installed & running
#
# useful to toggle on the go;
# example would be toggling compositor;
# notifies with `dunst` if installed and `X` is running
# *

# *****************************************************************************
# preamble
# *****************************************************************************
# source utility functions
. ./utils

# *****************************************************************************
# functions
# *****************************************************************************
# checks if dunst is installed; receives parameters
dunst_notify() {
    is_installed notify-send && pgrep -x Xorg >/dev/null 2>&1 &&
        notify-send -t "$1" "$2"
}

# *****************************************************************************
# main
# *****************************************************************************
if is_installed "$1"; then
    { is_running "$1" && pkill -9 "$1" &&
        dunst_notify 3000 "'$1' terminated"; } || {
        $1 &
        dunst_notify 3000 "'$1' now running"
    }
else
    dunst_notify 0 "$1: unknown program"
fi
